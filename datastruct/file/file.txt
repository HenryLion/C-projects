文件 -- 严蔚敏第十二章
文件即记录的集合，记录是文件中可以存取的数据的基本单位
文件的逻辑结构指的是呈现在用户面前的文件中记录之间的逻辑关系;文件的物理结构指的是文件中的逻辑记录在存储器中的组织。

文件的操作：
1）检索
顺序存取：存取当前记录的下一个记录
直接存取：存取第i个记录
按关键字存取：存取其关键字等于某个值的记录
2）修改
插入/删除/更新
3）排序
对文件中的记录进行排序

顺序文件
结构特点：记录在文件中的排列顺序是由记录进入存储介质的次序决定的
具体组织形式：
a、次序相继的记录物理在磁盘相邻
b、指针相邻
操作特点：
便于顺序存取，不便于进行直接存取。
插入新的记录只能加在文件末尾。
删除记录时，只做标记
更新记录必须生成新的文件
顺序文件的插入，删除和更新操作在多数情况下都依赖于“事务文件”，事务文件记录了一段时间以内对文件进行的所有操作，最后进行批处理，将源文件与事务文件进行合并。
需要注意：1）对于事务文件中的每个操作首先要判断其“合法性”
2）事务文件中可能存在多个操作是对主文件中同一个记录进行的。

索引文件方式
索引文件方式由“主文件"和多级“索引文件”组成
主文件包含所有记录项，是无序的
索引文件中的每个记录由“关键字”和“指针”组成
通常，主文件是无序文件，索引是(按关键字有序)的有序文件
“索引”是在输入数据建立文件时自动生成，初建时的“静态索引”为无序文件，经过排序后成为有序文件。
操作的特点：
检索方式为：直接存取和按关键字存取。“按关键字检索”分两步进行：先查索引，然后根据索引中指针所指索取记录。
插入记录时，记录插入在住文件的末尾，而相应的索引项必须插入在索引的合适位置上。
删除记录时，仅需删除索引表中索引即可。
更新记录时，应将更新后的记录插入在主文件的末尾，同时修改相应的索引项。

多级静态索引
索引文件个是： 主关键字|记录在主文件中的存储位置
查找表 -> 索引表 -> 主文件  (前面文件相当与对后面文件分区间)
动态索引
索引表采用查找树或哈希表
采用B树，B树本身就是多级索引
插入或删除时，只需要修改B树指针

索引顺序文件
结构特点：主文件按主关键字有序，对一组记录建立一个索引项(非稠密索引)
有两种典型的索引顺序文件：
1）ISAM文件：是一种专为磁盘存取设计的文件组织方法
主文件按柱面集中存放，同时建立三级索引：磁道索引，柱面索引和主索引
2）VSAM文件
利用操作系统中提供的虚拟存储器的功能组织文件，对用户而言，文件只有控制区间和控制区域等逻辑存储单位。

直接存取文件
由记录的关键字，直接得到记录在外存上的映像地址。
类似与哈希表的构造方法，将记录散列到外存储设备上，也称为散列文件。
允许多个记录映像到同一个地址上，在此，称外存储器中存放多个记录的数据块为桶。因此由哈希函数得到的映像地址为桶地址。

